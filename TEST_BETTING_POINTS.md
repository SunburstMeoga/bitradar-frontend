# 下注点功能测试指南

## 功能概述
在Trade页面点击Up或Down按钮后，会在折线图上生成一个下注点，该点会随着折线图移动。

## 测试步骤

### 1. 启动应用
```bash
npm run dev
```
访问 http://localhost:5174/

### 2. 基本功能测试
1. 在Trade页面，确保交易金额不为0（默认为1）
2. 点击绿色的"Up"按钮
3. 观察：
   - 页面上方应该显示"当前下注数量: 1"
   - 控制台应该显示下注信息
   - 图表上应该出现一个绿色圆点，中间有白色向上三角形

4. 再点击红色的"Down"按钮
5. 观察：
   - 页面显示"当前下注数量: 2"
   - 图表上应该出现一个红色圆点，中间有白色向下三角形

### 3. 移动测试
1. 等待几秒钟
2. 观察下注点是否随着图表的滑动窗口向左移动
3. 下注点应该保持在对应的价格水平线上

### 4. 清理测试
1. 等待3分钟
2. 观察下注点是否自动消失（根据Trade页面的清理逻辑）

## 预期结果

### 下注点外观
- **尺寸**: 10px × 10px 圆形
- **Up方向**: 绿色背景(#00bc4b) + 白色向上三角形
- **Down方向**: 红色背景(#f5384e) + 白色向下三角形
- **三角形**: 宽度4px

### 下注点行为
- 出现在下注时的BTC价格位置
- 随着图表滑动窗口移动
- 3分钟后自动清理

### 控制台输出
- Trade页面: "🎯 用户下注: {bet对象}"
- PriceChart: "📊 PriceChart收到userBets: [bet数组]"
- PriceChart: "🎨 绘制用户下注点: X个点"

## 故障排除

### 如果下注点不显示
1. 检查控制台是否有错误
2. 确认交易金额不为0
3. 确认userBets数据是否正确传递
4. 检查Chart.js插件是否正确注册

### 如果下注点位置不正确
1. 检查时间戳计算逻辑
2. 确认价格数据是否正确
3. 检查坐标转换逻辑

## 技术实现

### 关键组件
- `src/pages/Trade/index.jsx`: 处理用户下注
- `src/components/PriceChart/index.jsx`: 绘制下注点

### 关键函数
- `handlePlaceBet()`: 创建下注记录
- `userBetsPlugin`: Chart.js插件，绘制下注点
- `drawBetPoint()`: 绘制单个下注点

### 数据流
1. 用户点击Up/Down → `handlePlaceBet()` → 更新`userBets`状态
2. `userBets`作为props传递给`PriceChart`
3. `PriceChart`将`userBets`传递给Chart.js options
4. `userBetsPlugin`在图表渲染后绘制下注点
