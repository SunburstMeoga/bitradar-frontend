# Tradeé¡µé¢å“åº”å¼å¸ƒå±€å®ç°

## ğŸ“‹ éœ€æ±‚æ¦‚è¿°

å®ç°Tradeé¡µé¢åœ¨æ‰‹æœºã€å¹³æ¿ã€PCä¸­çš„å‚ç›´é“ºæ»¡å±å¹•å¸ƒå±€ï¼Œé€šè¿‡åŠ¨æ€è°ƒæ•´canvasï¼ˆPriceChartï¼‰çš„é«˜åº¦æ¥é€‚åº”ä¸åŒè®¾å¤‡çš„å±å¹•å°ºå¯¸ã€‚

## ğŸ› ï¸ å®ç°æ–¹æ¡ˆ

### 1. åˆ›å»ºè§†å£é«˜åº¦è®¡ç®—Hook

**æ–‡ä»¶**: `src/hooks/useViewportHeight.js`

**åŠŸèƒ½**:
- è®¡ç®—å»é™¤Headerã€Footeråçš„å¯ç”¨é«˜åº¦
- å“åº”çª—å£å¤§å°å˜åŒ–å’Œè®¾å¤‡æ–¹å‘å˜åŒ–
- åŒºåˆ†ç§»åŠ¨ç«¯å’ŒPCç«¯çš„ä¸åŒè®¡ç®—æ–¹å¼
- æä¾›mainAreaHeightç”¨äºTradeé¡µé¢å¸ƒå±€

**å…³é”®è®¡ç®—**:
```javascript
// ç§»åŠ¨ç«¯Headeré«˜åº¦: py-[11vw] * 2 + å†…å®¹é«˜åº¦36vw
const headerHeight = (11 / 375) * windowWidth * 2 + (36 / 375) * windowWidth;

// ç§»åŠ¨ç«¯Footeré«˜åº¦: py-[12vw] * 2 + å†…å®¹é«˜åº¦42vw  
const footerHeight = (12 / 375) * windowWidth * 2 + (42 / 375) * windowWidth;

// PCç«¯å›ºå®šé«˜åº¦
const headerHeight = 12 * 2 + 36; // 60px
const footerHeight = 12 * 2 + 40; // 64px
```

### 2. ä¿®æ”¹Tradeé¡µé¢å¸ƒå±€é€»è¾‘

**æ–‡ä»¶**: `src/pages/Trade/index.jsx`

**ä¸»è¦æ”¹åŠ¨**:
- å¼•å…¥`useViewportHeight` Hook
- å®ç°åŠ¨æ€PriceCharté«˜åº¦è®¡ç®—
- ä¿®æ”¹é¡µé¢å®¹å™¨ä¸º`h-full flex flex-col`
- ç§»é™¤å›ºå®šçš„åº•éƒ¨padding

**åŠ¨æ€é«˜åº¦è®¡ç®—**:
```javascript
const calculateChartHeight = () => {
  // è®¡ç®—å›ºå®šå…ƒç´ é«˜åº¦
  let fixedElementsHeight = 0;
  
  if (isMobile) {
    // ä»·æ ¼ä¿¡æ¯æ  + è¾¹è· + äº¤æ˜“å¡ç‰‡
    const priceBarHeight = (64 / 375) * windowWidth;
    const priceBarMargins = (20 / 375) * windowWidth;
    const tradingCardHeight = (250 / 375) * windowWidth;
    fixedElementsHeight = priceBarHeight + priceBarMargins + tradingCardHeight;
  } else {
    // PCç«¯å›ºå®šé«˜åº¦
    fixedElementsHeight = 64 + 24 + 244; // çº¦332px
  }

  // è®¡ç®—å›¾è¡¨å¯ç”¨é«˜åº¦
  const chartHeight = Math.max(mainAreaHeight - fixedElementsHeight, isMobile ? 200 : 250);
  return `${chartHeight}px`;
};
```

### 3. æ›´æ–°PriceChartç»„ä»¶

**æ–‡ä»¶**: `src/components/PriceChart/index.jsx`

**æ”¹åŠ¨**:
- ç§»é™¤å›ºå®šé«˜åº¦è®¾ç½®`h-[346vw] md:h-80`
- æ”¹ä¸ºä½¿ç”¨çˆ¶å®¹å™¨ä¼ é€’çš„é«˜åº¦`h-full`
- ç¡®ä¿å›¾è¡¨èƒ½å¤Ÿæ­£ç¡®é€‚åº”åŠ¨æ€é«˜åº¦

### 4. è°ƒè¯•å·¥å…·

**æ–‡ä»¶**: `src/components/DebugInfo/index.jsx`

**åŠŸèƒ½**:
- å¼€å‘ç¯å¢ƒä¸‹æ˜¾ç¤ºé«˜åº¦è®¡ç®—ä¿¡æ¯
- å®æ—¶æ˜¾ç¤ºçª—å£å°ºå¯¸ã€ä¸»åŒºåŸŸé«˜åº¦ç­‰è°ƒè¯•æ•°æ®
- å¸®åŠ©éªŒè¯å“åº”å¼å¸ƒå±€æ˜¯å¦æ­£ç¡®å·¥ä½œ

## ğŸ“± å“åº”å¼æ–­ç‚¹

- **ç§»åŠ¨ç«¯**: < 768px (ä½¿ç”¨vwå•ä½)
- **å¹³æ¿/PCç«¯**: â‰¥ 768px (ä½¿ç”¨pxå•ä½)

## ğŸ¯ å®ç°æ•ˆæœ

### ç§»åŠ¨ç«¯
- åŸºäº375pxè®¾è®¡ç¨¿çš„vwé€‚é…
- åŠ¨æ€è®¡ç®—PriceCharté«˜åº¦ä»¥å¡«å……å‰©ä½™ç©ºé—´
- ä¿æŒåŸæœ‰çš„è§†è§‰æ¯”ä¾‹å’Œé—´è·

### PCç«¯/å¹³æ¿
- æœ€å¤§å®½åº¦428pxï¼Œå±…ä¸­æ˜¾ç¤º
- ä½¿ç”¨å›ºå®špxå•ä½ç¡®ä¿ä¸€è‡´æ€§
- åŠ¨æ€è°ƒæ•´å›¾è¡¨é«˜åº¦é€‚åº”ä¸åŒå±å¹•

## ğŸ”§ æµ‹è¯•é¡µé¢

**è®¿é—®åœ°å€**: `http://localhost:5174/test-layout`

**åŠŸèƒ½**:
- æ¨¡æ‹ŸTradeé¡µé¢çš„å¸ƒå±€ç»“æ„
- æ˜¾ç¤ºåŠ¨æ€é«˜åº¦è®¡ç®—ç»“æœ
- éªŒè¯å“åº”å¼å¸ƒå±€æ•ˆæœ

## ğŸ“Š å…³é”®ç‰¹æ€§

1. **å‚ç›´é“ºæ»¡**: é¡µé¢å†…å®¹å®Œå…¨å¡«å……å¯ç”¨çš„å‚ç›´ç©ºé—´
2. **å“åº”å¼**: è‡ªåŠ¨é€‚åº”ä¸åŒè®¾å¤‡å°ºå¯¸
3. **åŠ¨æ€è°ƒæ•´**: PriceCharté«˜åº¦æ ¹æ®å±å¹•å¤§å°åŠ¨æ€è®¡ç®—
4. **æ€§èƒ½ä¼˜åŒ–**: ä½¿ç”¨useEffectç›‘å¬çª—å£å˜åŒ–ï¼Œé¿å…ä¸å¿…è¦çš„é‡è®¡ç®—
5. **è°ƒè¯•å‹å¥½**: å¼€å‘ç¯å¢ƒæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

## ğŸš€ ä½¿ç”¨æ–¹æ³•

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨: `npm run dev`
2. è®¿é—®Tradeé¡µé¢: `http://localhost:5174/`
3. è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æµ‹è¯•å“åº”å¼æ•ˆæœ
4. ä½¿ç”¨å¼€å‘è€…å·¥å…·æ¨¡æ‹Ÿä¸åŒè®¾å¤‡å°ºå¯¸

## ğŸ“ æ³¨æ„äº‹é¡¹

- ç¡®ä¿Layoutç»„ä»¶çš„`main`å…ƒç´ æœ‰`flex-1`ç±»å
- PriceChartç»„ä»¶éœ€è¦ä½¿ç”¨`h-full`è€Œä¸æ˜¯å›ºå®šé«˜åº¦
- è°ƒè¯•ä¿¡æ¯ä»…åœ¨å¼€å‘ç¯å¢ƒæ˜¾ç¤º
- æœ€å°é«˜åº¦é™åˆ¶ç¡®ä¿å›¾è¡¨åœ¨æå°å±å¹•ä¸Šä»å¯ç”¨
